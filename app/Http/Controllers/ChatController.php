<?phpnamespace App\Http\Controllers;use App\Events\MessageSent;use App\Http\Requests\IndexChatRequest;use App\Http\Requests\MarkMessageAsReadRequest;use App\Http\Requests\StoreChatRequest;use App\Http\Resources\MessageCollection;use App\Services\MessageService;use Illuminate\Http\Response;class ChatController extends Controller{    protected MessageService $messageService;    public function __construct(MessageService $messageService)    {        $this->messageService = $messageService;    }    public function store(StoreChatRequest $request)    {        $message = $this->messageService->store($request->safe()->merge(['sender_id' => $request->user()->id])->all());		broadcast(new MessageSent($message))->toOthers();		return response()->json([],Response::HTTP_CREATED);    }	public function index(IndexChatRequest $request)	{		$messages = $this->messageService->AllChatWithUser($request->user_id);		return response()->json(new MessageCollection($messages),Response::HTTP_OK);	}	public function read(MarkMessageAsReadRequest $request)	{		$this->messageService->markMessageAsRead($request->message_id);		return response()->json(['Message read successfully'],Response::HTTP_OK);	}}